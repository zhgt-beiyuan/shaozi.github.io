/**
 * 全局公共样式 - 部分样式与 infima 源码重叠，仅供学习使用 
 *
 * @import url() 是 css 的方法，在 scss 中不生效，需使用 @import '../路径'
 */
@import './themes/arco-theme.scss'; // 默认主题
// @import './themes/arco-new-year-theme.scss'; // 春节主题
// @import './themes/arco-christmas-theme.scss'; // 圣诞主题
@import './themes/paper-theme.scss';

@import './dino-styles.scss';

@import './docusaurus-theme/navbar.scss'; // 顶部导航条
@import './docusaurus-theme/footer.scss'; // 底部内容
@import './docusaurus-theme/markdown.scss'; // markdown 内容
@import './docusaurus-theme/doc-sidebar.scss'; // doc 侧边栏
@import './docusaurus-theme/codeblock.scss'; // 代码块
@import './docusaurus-theme/announcement-bar.scss'; // 顶部公告条
@import './docusaurus-theme/tabs.scss'; // Tabs 切换
@import './docusaurus-theme/table-of-contents.scss'; // 右侧目录
@import './docusaurus-theme/admonition.scss'; // 告示框

/* 霞鹜文楷 - 开源字体 https://github.com/lxgw/LxgwWenKai */
@font-face {
  font: {
    family: 'lxgw-wenkai';
    weight: normal;
    style: normal;
  }
  src: url(@site/static/fonts/LXGWWenKai-Regular.ttf);
}

:root {
  /* Font */
  --dino-font-weight-thin: 100;
  --dino-font-weight-light: 300;
  --dino-font-weight-normal: 400;
  --dino-font-weight-medium: 500;
  --dino-font-weight-bold: 600;

  --dino-font-size-xxs: 0.625rem; // 10px
  --dino-font-size-xs: 0.75rem; // 12px
  --dino-font-size-sm: 0.875rem; // 14px
  --dino-font-size-base: 1rem; // 16px
  --dino-font-size-lg: 1.125rem; // 18px
  --dino-font-size-xl: 1.25rem; // 20px
  --dino-font-size-2xl: 1.5rem; // 24px
  --dino-font-size-3xl: 1.875rem; // 30px
  --dino-font-size-4xl: 2.25rem; // 36px
  --dino-font-size-5xl: 3rem; // 48px

  --darkgray-1: 235, 237, 240;
  --darkgray-2: 247, 248, 250;
  --darkgray-3: 229, 230, 235;
  --darkgray-5: 68, 73, 80;
  --darkgray-8: 31, 41, 55;
  --darkgray-9: 17, 24, 39;
}

body {
  --dino-font-family-base: -apple-system, system-ui, BlinkMacSystemFont, Helvetica Neue, PingFang SC,
    Hiragino Sans GB, Microsoft YaHei, Arial, sans-serif;
  // --dino-font-family-base: 'lxgw-wenkai';

  --ifm-navbar-padding-horizontal: 1rem; // navbar 水平方向的 padding
  --ifm-navbar-height: 3.75rem; // navbar 高度
  --ifm-menu-link-padding-horizontal: 0.875rem; // menu link 水平方向的 padding

  --ifm-navbar-link-color: var(--color-text-1);
  --ifm-link-color: var(--ifm-color-primary);
  --ifm-link-hover-color: var(--ifm-color-primary);
  --ifm-pagination-nav-color-hover: var(--ifm-color-primary);
  --ifm-navbar-link-hover-color: var(--ifm-color-primary);
  --ifm-footer-link-hover-color: var(--ifm-color-primary);
  --ifm-tabs-color-active-border: var(--ifm-color-primary);
  --ifm-tabs-color-active: var(--ifm-color-primary);

  // 🍋 以下变量需适配暗夜模式主题
  --ifm-color-primary: rgb(var(--primary-6)); // docusaurus 主题色
  // --ifm-navbar-background-color: var(--color-white);
  // --ifm-footer-background-color: rgb(var(--darkgray-2));
  // --ifm-dropdown-background-color: var(--color-white);
  // --ifm-card-background-color: var(--color-white);
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.1); // 代码高亮区域背景色

  --dino-color-heading: rgb(var(--darkgray-9)); // 标题
  --dino-color-body: rgb(var(--darkgray-8));
  // --dino-color-body-bg: var(--color-white);
  --dino-color-code: rgb(var(--primary-6)); // 代码块
  --dino-color-code-bg: rgba(var(--primary-6), 0.08);
  --dino-color-browser-bg: rgb(var(--darkgray-1)); // browser 组件
  --dino-color-blockquote: rgb(var(--gray-6)); // 引言
  --dino-color-table-border: var(--color-neutral-3); // table
  --dino-color-table-th-bg: var(--color-neutral-2);
}

html[data-theme='dark'] {
  body {
    --ifm-color-primary: rgb(var(--primary-4)); // docusaurus 主题色
    // --ifm-navbar-background-color: rgb(var(--darkgray-8));
    // --ifm-footer-background-color: rgb(var(--darkgray-8));
    // --ifm-dropdown-background-color: rgb(var(--darkgray-8));
    // --ifm-card-background-color: rgb(var(--darkgray-8));
    --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.3); // 代码高亮区域背景色

    --dino-color-heading: rgb(var(--darkgray-3));
    --dino-color-body: rgb(var(--darkgray-3));
    // --dino-color-body-bg: rgb(var(--darkgray-9));
    --dino-color-code: rgb(var(--primary-5));
    --dino-color-code-bg: rgba(var(--primary-5), 0.08);
    --dino-color-browser-bg: rgb(var(--darkgray-5));
    --dino-color-blockquote: rgb(var(--darkgray-3));
    --dino-color-table-border: var(--color-neutral-6);
    --dino-color-table-th-bg: var(--ifm-table-stripe-background); // rgba(255, 255, 255, 0.07);
  }
}

/* Base Styles - 基础样式 */
/* html 和 body 如果都设置背景色，则 body 之外的背景色依然是 html 的背景色，不会撑满整个网页，所以二者只能选一个设置背景色 */
// * {
//   box-sizing: content-box;
// }

html {
  background-color: initial;
  color: initial;
  line-height: initial;
  -webkit-font-smoothing: antialiased; // 抗锯齿，使字体看起来更清晰
  text-rendering: optimizelegibility; // 文本渲染方式
}

body {
  color: var(--dino-color-body);
  // background-color: var(--dino-color-body-bg);
  font-size: 16px;
  font-family: var(--dino-font-family-base);
  margin: 0;
  line-height: initial;
  box-sizing: border-box;
  word-wrap: break-word; // 允许长单词换行
}

/* Heading */
$--dino-h1-font-size: 2.5rem; // 42px
$--dino-h2-font-size: 1.875rem; // 30px
$--dino-h3-font-size: 1.5rem;
$--dino-h4-font-size: 1.125rem;
$--dino-h5-font-size: 1rem;
$--dino-h6-font-size: 0.875rem;

$heading-list: (
  (1, $--dino-h1-font-size),
  (2, $--dino-h2-font-size),
  (3, $--dino-h3-font-size),
  (4, $--dino-h4-font-size),
  (5, $--dino-h5-font-size),
  (6, $--dino-h6-font-size)
);
@each $key, $size in $heading-list {
  h#{$key} {
    font-size: $size;
    font-weight: var(--dino-font-weight-bold);
    font-family: var(--dino-font-family-base);
    color: var(--dino-color-heading);
    margin: 0;
    position: relative;
  }
}

p {
  margin: 0;
  font-size: var(--dino-font-size-sm);
  letter-spacing: 2px;
}

a {
  @extend .transition-all;
  &:hover {
    opacity: 0.85;
  }
  // 没有 href 属性的 a 标签
  :not([href]) {
    text-decoration: none;
  }
}

table {
  width: 100%;
  min-width: 100%;
  border-spacing: 0;
  border-collapse: separate;
  display: revert; // 重置，还原
  table-layout: fixed; // 让 table 宽度有效，但是 td 的宽度会等分，且设置 td 宽度无效
  margin-bottom: 1.25rem;
  th,
  td {
    border: none;
  }
  @mixin commonStyle {
    box-sizing: border-box;
    text-align: left;
    line-height: 1.625;
    padding: 0.625rem 1rem;
    border-bottom: 1px solid var(--dino-color-table-border);
    border-left: 1px solid var(--dino-color-table-border); // 全部显示边框
    // &:first-child {
    //   border-left: 1px solid var(--dino-color-table-border); // 只显示两边的边框
    // }
  }
  > thead > tr {
    > th {
      @include commonStyle;
      font-size: var(--dino-font-size-sm);
      font-weight: 500;
      background-color: var(--dino-color-table-th-bg);
      border-top: 1px solid var(--dino-color-table-border);
      &:first-child {
        border-top-left-radius: 4px;
      }
      &:last-child {
        border-top-right-radius: 4px;
      }
      &:last-child:not(th[class='arco-table-th']) {
        border-right: 1px solid var(--dino-color-table-border);
      }
    }
  }
  > tbody > tr {
    &:hover > td {
      background-color: var(--color-fill-1);
    }
    &:nth-child(2n) > td {
      background-color: var(--color-fill-1);
    }
    > td {
      @include commonStyle;
      background-color: var(--color-bg-2);
      transition: background-color 0.2s;
      font-size: 13px;
      &:last-child:not(td[class='arco-table-td']) {
        border-right: 1px solid var(--dino-color-table-border);
      }
      code {
        font-size: var(--dino-font-size-xs);
      }
    }
  }
}

code:not(code[class^='codeBlockLines_']) {
  word-break: break-word;
  border-radius: 2px;
  overflow-x: auto;
  background-color: var(--dino-color-code-bg);
  color: var(--dino-color-code);
  padding: 1px 5px;
  border: none;
  margin-top: -3px;
  line-height: 17px;
  height: 17px;
  vertical-align: middle;
  font-family: var(--dino-font-family-base);
  letter-spacing: 1px;
}

strong,
b {
  border-bottom-style: dashed;
  border-bottom-width: 1px;

  > a {
    border: inherit;
  }
}

/* 文档索引页面的 Card 卡片 */
article > a[class*='cardContainer_'] {
  > h2 {
    margin-bottom: 1rem;
  }
  // &:hover {
  //   background-color: transparent;
  // }
}

/* 面包屑导航 */
.breadcrumbs,
.breadcrumbs__item {
  display: flex;
  align-items: center;
}

/* 响应式 */
$--dino-sm: 640px;
$--dino-md: 768px;
$--dino-lg: 1140px;
$--dino-xl: 1320px;
$--dino-2xl: 1536px;
@media (min-width: $--dino-2xl) {
  .container {
    max-width: $--dino-2xl;
  }
}

/* 滚动条样式 */
@media (pointer: fine) {
  div[class*='codeBlockContent_'],
  .thin-scrollbar {
    // 整体
    &::-webkit-scrollbar {
      width: 12px;
      height: 4px;
    }
    // 滑块
    &::-webkit-scrollbar-thumb,
    &::-webkit-scrollbar-thumb:hover {
      border: 4px solid transparent;
      background-clip: padding-box;
      border-radius: 7px;
      background-color: var(--color-fill-4);
    }
    // 外层轨道
    &::-webkit-scrollbar-track {
      background: transparent;
      border-radius: 0;
    }
  }
}
