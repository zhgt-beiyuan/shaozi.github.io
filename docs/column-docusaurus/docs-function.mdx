---
title: 文档功能记录
sidebar_position: 3
---

## 创建文档 🐸

- 创建文档时，每篇文档都有一个唯一的 `id`，默认情况下，文档的 `id` 就是该文档的相对于 `/docs` 目录的文件名；
- 例如：`/docs/introduction.md` 的 id 是 `introduction`，`/docs/study/interview.md` 的 id 是 `study/interview`；

```md title="example.md 示例"
---
title: Hello Docusaurus
id: doc
slug: /
---

> 引言

## 文档二级标题

### 文档三级标题

文档主体内容...
```

## 文档元数据配置 🐸

- Docusaurus 支持在文档中配置该文档的 **元数据信息**，包括 **标题**，**路由**，**侧边栏显示** 等配置项；

```yml title="文档元数据介绍"
# ☘ 自定义文档的路由 url（当希望某篇被放置到 /docs 根目录下的文档，具有 'https://xxx/docs' 的主路径时，可将该项设置为 /）
slug: path

# ☘ 自定义文档的唯一 id
id: id

# ☘ 文档标题（当没有定义 sidebar_label 时，会默认显示在侧边栏）
title: 文档标题

# 自定义侧边栏中的文档标题
sidebar_label: 侧边栏中的文档标题

# ☘ 使用 autogenerated 自动生成侧边栏时，可自定义文档在侧边栏中顺序
sidebar_position: 2

# 使用 autogenerated 自动生成侧边栏时，可自定义侧边栏中文档标题的样式类名
sidebar_class_name: 侧边栏标题的 className

# 隐藏文档顶部的标题，boolean 类型，默认为 false
hide_title: false

# 是否隐藏文档右侧的目录列表，boolean 类型，默认为 false
hide_table_of_contents: false

# 自定义文档分页（上一篇/下一篇）按钮中的文本内容，默认显示为 sidebar_label / title 中的内容
pagination_label: 分页按钮文本

# 自定义点击 下一篇(Next) 的分页按钮跳转后的文档 id
# 设置为 null 时，不显示 下一篇(Next) 的分页按钮
pagination_next: id

# 自定义点击 上一篇(Previous) 的分页按钮跳转后的文档 id
# 设置为 null 时，不显示 上一篇(Previous) 的分页按钮
pagination_prev: id

# 是否停止解析带有 数字前缀 的文件名（使用 autogenerated 自动生成文档侧边栏时，便于文档排序，但不推荐使用）
parse_number_prefixes: false

# 自定义文档 在线编辑 的链接地址
custom_edit_url: https://...

# ☘ 文档的描述信息，用于填充 <head> 标签中的 <meta name="description" content="..."/> 和 <meta property="og:description" content="..."/>，供搜索引擎（SEO）索引，若不设置，则使用文档正文内容的第一行代替
description: 描述

# ☘ 设置文档的关键字，用于填充 <head> 标签中的 <meta name="keywords" content="keywords1, keywords2, ..." />，供搜索引擎（SEO）索引
keywords: [key1, key2]
# 或
keywords:
  - key1
  - key2

# 文档的所属标签，会显示在文档下方
tags: [{ label: 标签名称, permalink: 标签固定的链接地址 }, ...]
# 或
tags:
  - tag1
  - tag2

# 右侧目录列表可显示的最小标题级别，默认是 2（h2 标题，范围只能是 h2-h6 之间）
toc_min_heading_level: 2

# 右侧目录列表可显示的最大标题级别，默认是 3（h3 标题，范围只能是 h2-h6 之间）
toc_max_heading_level: 3

# 显示文档时所使用的封面或缩略图地址
image: /...
```

:::tip 离谱小贴士

- 文档 **标题** 显示的优先级：`title` > `id` > `文件名`；
- **侧边栏** 中文档 **标题** 显示的优先级：`sidebar_label` > `title` > `id` > `文件名`；
- 文档 **路由** 显示的优先级：`slug` > `id` > `文件名`；
- 文档 **分页按钮文本** 显示的优先级：`pagination_next / pagination_prev（id 所对应的文档标题）` > `pagination_label` > `sidebar_label` > `title` > `id` > `文件名`；

:::

## 配置文档侧边栏 🐸

- 在根目录下创建一个 `/sidebars.js` 文件，该文件会作为文档侧边栏的配置文件；
- `/sidebars.js` 文件会导出一个对象，docusaurus 会将此对象直接或通过 `@docusaurus/preset-classic` 插件传递给 `@docusaurus/plugin-docs` 插件；
- 配置侧边栏时，有以下几种配置属性：

```jsx title="sidebars.js 中的配置属性"
module.export = {
  // 常规语法
  'groupSidebar-A': [
    {
      // ☘ 侧边栏的配置类型，默认为 'doc'，详细内容请往↓翻
      type: 'doc',

      // ☘ 文档的唯一 id，当 type 为 link 类型时，不可指定该属性
      id: '',

      // ☘ 文档的标题，定义在文档元数据内的标题（title）优先级更高
      label: '标题',

      // ☘ 当 type 为 Category 类型时，可配置子菜单（由文档 id 组成的数组）
      items: [],

      // 当 type 为 link 类型时，指定可跳转的链接地址
      href: '',

      // ☘ 当 type 为 autogenerated 类型时，可指定该属性，该属性表示一个相对于 /docs 的目录，用于自动生成侧边栏
      dirName: '.',   // '.' 指的是 /docs 目录，也就是存放文档的根目录

      /** 是否显示 展开/折叠 按钮，只有 type 为 Category 类型时有效
       * true - 显示（默认）
       * false - 隐藏
       */
      collapsible: true,

      /** ☘ 初始状态（刷新页面）时该菜单是否自动 展开/折叠，当不需要该属性时，可以采用简写方式，只有 type 为 Category 类型时有效
       * true - 折叠（默认）
       * false - 展开
       */
      collapsed: false,

      // 当希望侧边栏能接收一些额外的 参数信息 时，可配置该属性
      customProps: {},

      // 当前侧边栏 label 的 className
      className: '',
    },
  ],

  // 简写语法
  // highlight-next-line
  'id',   // 直接指定文档的 id 即可
};
```

### 定义多个(组)侧边栏

- 当配置了多个侧边栏时，并且导航栏有多个菜单，那么导航菜单的入口路径（文档路径）配置在哪个侧边栏中，则该菜单就显示哪个侧边栏；

```jsx title="sidebars.js 代码示例"
module.export = {
  // 侧边栏 - A
  'groupSidebar-A': [
    'primaryTitle(一级标题)': ['example/doc1', 'example/doc2'],
  ]
  // 侧边栏 - B
  'groupSidebar-B': ['doc3', 'doc4']
}
```

```jsx title="docusaurus.config.js 代码示例"
module.export = {
  ...
  themeConfig: {
    ...
    navbar: {   // 导航栏
      ...,
      items: [
        {
          label: '工作 😒',
          to: 'docs/example/doc1',   // 跳转路径，该页面的侧边栏是 groupSidebar-A
        },
        {
          label: '成长',
          to: 'docs/doc3',    // 该页面的侧边栏是 groupSidebar-B
        },
      ]
    }
  },
  ...
}
```

:::tip 离谱小贴士

- `groupSidebar-A` 和 `groupSidebar-B` 仅仅只是 **定义不同侧边栏的 id**，除此之外没有任何意义；
- 尽量避免将 **同一文档** 配置在 不同的侧边栏中；

:::

### 侧边栏的 5 种配置类型

- **[Doc 类型](#sidebar-item-doc)**：跳转至文档页面，并将该文档页面归属于当前侧边栏，简写模式下，默认指定该类型；
- **[Ref 类型](#sidebar-item-ref)**: 跳转至文档页面，不将该文档页面归属于当前侧边栏（也就是跳转该文档页面后，当前侧边栏不会显示）；
- **[Link 类型](#sidebar-item-link)**: 跳转至任何站内或站外的页面，会自动识别内链或外链，必需指定 `href` 和 `label` 属性；
- **[Category 类型](#sidebar-item-category)**: 创建层级结构的侧边栏；
- **[Autogenerated 类型](#sidebar-item-autogenerated)**: 根据文件目录结构，自动生成侧边栏；

#### Doc 类型：跳转至文档页面 {#sidebar-item-doc}

```jsx title="sidebars.js"
module.export = {
  docSidebar: [
    // 常规语法
    // highlight-start
    { type: 'doc', label: 'study', id: 'study/doc1' },
    // highlight-end

    // 简写语法
    // highlight-start
    'study/doc1',
    // highlight-end
  ],
};
```

#### Ref 类型：跳转至文档页面，且不归属于当前侧边栏 {#sidebar-item-ref}

```jsx title="sidebars.js"
module.export = {
  refSidebar: [
    ...,
    { type: 'ref', label: 'study', id: 'doc1' },
  ],
};
```

#### Link 类型：跳转至任意页面 {#sidebar-item-link}

```jsx title="sidebars.js"
module.export = {
  linkSidebar: [
    // 站外链接
    // highlight-start
    { type: 'link', label: '百度一下', href: 'http://baidu.com' },
    // highlight-end

    // 站内链接
    // highlight-start
    { type: 'link', lable: '首页', href: '/' },
    // highlight-end
  ],
};
```

#### Category 类型：创建层级结构侧边栏 {#sidebar-item-category}

```jsx title="sidebars.js"
module.export = {
  categorySidebar: [
    // 常规写法
    // highlight-start
    {
      type: 'category',
      label: '学习专栏',
      collapsed: false,
      items: ['study/doc1', 'study/doc2', { type: 'link', label: '外链', href: '' }, ...],
    },
    // highlight-end

    // 当不需要设置 collapsible 或 collapsed 属性时，可采用 简写方式
    // highlight-start
    学习专栏: ['study/doc1', 'study/doc2', ...],
    // highlight-end
  ],
};
```

#### Autogenerated 类型：自动生成侧边栏 {#sidebar-item-autogenerated}

- 根据 **dirName** 指定的目录，自动将该目录下所有的文件转成侧边栏；

```jsx title="sidebars.js"
module.export = {
  autogeneratedSidebar: [
    {
      type: 'category',
      label: '学习专栏',
      items: [{ type: 'autogenerated', dirName: 'study' }, ...]
    },
  ],
};
```

- 自动生成侧边栏时，如果希望自定义文档在侧边栏的 **显示顺序（排序）**，可在文档的元数据中添加额外参数；

```yml {3-5} title="doc.md 示例"
title: '文档标题'

# 额外参数
sidebar_label: '自定义侧边栏中的文档标题'
sidebar_position: 2 # '自定义文档顺序'
```

- 当 `dirName` 指定为 `'.'(/docs 目录)` 时，可在该目录下的每个文件夹中创建 `_category_.json` 或 `_category_.yml` 文件，
  用来配置 **一级标题**，以便自动创建包含 **层级结构** 的侧边栏；

```yml title="_category_.yml 示例"
label: 学习专栏（一级标题）
position: 2 # 排序
collapsed: false
collapsible: true
```

## 文档的全局配置项 🐸

- 通过 `docusaurus.config.js` 文件中的 `presets（预设）` 对 `docs` 进行定制化的配置，部分配置项如下：

```jsx title="docs 的部分配置项"
module.exports = {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        // ...
        docs: {
          // 文档在项目中的相对路径，默认为 'docs'
          path: 'docs',

          // ☘️ 配置文档首页的路由地址，默认为 'docs'
          routeBasePath: 'docs',

          /**
           * ☘️ 配置文档侧边栏在项目中的路径，默认值 为 undefined，当需要自行配置侧边栏时，可指定该属性
           * undefined - 根据 /docs 中的文件自动生成侧边栏
           * false - 不显示侧边栏
           */
          sidebarPath: require.resolve('./sidebars.js'),

          // 是否显示侧边栏中所有菜单的 展开 / 折叠按钮，boolean 类型，默认为 true
          sidebarCollapsible: true,

          // 是否在页面初始化时，自动展开（false）/ 折叠（true）所有的层级侧边栏，boolean 类型，默认为 true
          sidebarCollapsed: true,

          // 将 type 为 autogenerated 时自动生成的侧边栏，替换成该属性自定义的侧边栏，该属性是一个 Promise 函数，返回一个 array
          sidebarItemsGenerator: async function ({ item, docs }) {
            console.log(item);    // sidebars.js 中每一个 type 为 autogenerated 的菜单
            console.log(docs);    // 所有文档的目录 及 元数据信息
            // 返回一个自定义的侧边栏，来替换 type 为 autogenerated 时的侧边栏（示例）
            return [
              { type: 'doc', id: 'introduction' },
              {
                type: 'category',
                label: '层级菜单',
                items: [{ type: 'doc', id: 'column-docusaurus/markdown-features' }],
              },
            ];
          },

          // 定义文档页面的主题组件，一般不用配置（有需要自定义其他主题组件时可配置）
          docLayoutComponent: '@theme/DocPage', // 文档布局页面
          docItemComponent: '@theme/DocItem', // 主文档页面，包含 sidebar，Toc（目录列表）等功能
          docTagsListComponent: '@theme/DocTagsListPage', // 文档的标签列表页面
          docTagDocListComponent: '@theme/DocTagDocListPage', // 文档的标签对应的内容页面

          /**
           * 配置在线编辑的地址，不设置则不会显示文章下方的编辑按钮
           * 可以是一个回调函数（function），返回一个 string / undefined，用来定位当前文章的在线编辑地址
           */
          editUrl: 'https://github.com/zhgt-shaozi/zhgt-shaozi.github.io/tree/main/docs',
          editUrl: ({ version, locale, versionDocsDirPath, docPath, permalink }) => {
            console.log(version); // 每篇文档的版本，默认为当前版本 'current'
            console.log(locale); // 当前环境的语言包，默认英文（en）
            console.log(versionDocsDirPath); // 每篇文档的根目录
            console.log(docPath); // 每篇文档的目录 文件名
            console.log(permalink); // 每篇文档元数据的 slug 属性，路由地址
            return `https://github.com/zhgt-shaozi/zhgt-shaozi.github.io/tree/main/${versionDocsDirPath}/${docPath}`;
          },

          /**
           * 当 editUrl 为一个地址时，可开启该配置，会以当前文章的本地化文件为目标，自动寻找并定位当前文章的在线编辑地址，为 boolean 类型，默认为 false
           * 当 editUrl 为一个函数时，该配置无效
           */
          editLocalizedFiles: false,

          // 让 editUrl 的地址始终以当前文档为目标，而不是旧版本的文档，boolean 类型，默认为 false
          editCurrentVersion: false,

          // 自定义 tags 标签列表页的路由，默认为 'tags'，完整路由为：https://xxx/docs/tags
          tagsBasePath: 'tags',

          // ☘ remark 是 Markdown 的处理器，可提供一些插件来支持 Markdown，丰富 Markdown 的功能
          remarkPlugins: [
            [require('@docusaurus/remark-plugin-npm2yarn'), { sync: true }],
          ],

          // rehype 是将 Markdown 转换成 HTML 的处理器，可提供一些插件，更方便的进行转换
          rehypePlugins: [],

          // ☘ 是否显示最近一次更新文档的 作者，boolean 类型，默认为 false
          showLastUpdateAuthor: false,

          // ☘ 是否显示最近一次更新文档的 时间，boolean 类型，默认为 false
          showLastUpdateTime: false,

          // 指定哪些 文件 能被匹配到（以下是默认值）
          include: ['**/*.{md,mdx}'],

          // 指定哪些 文件 不能被匹配到（以下是默认值）
          exclude: [
            '**/_*.{js,jsx,ts,tsx,md,mdx}',
            '**/_*/**',
            '**/*.test.{js,jsx,ts,tsx}',
            '**/__tests__/**',
          ],

          ...
        },
      },
    ],
  ],
};
```

## 相关链接 🔗

- [Docusaurus 官方文档 - 文档功能](https://www.docusaurus.cn/docs/versioning)
- [Docusaurus 官方文档 - 📦 plugin-content-docs 插件](https://www.docusaurus.cn/docs/api/plugins/@docusaurus/plugin-content-docs)
